{% extends "main.html.twig" %}

{% block outerBody %}

    <script type="text/javascript">
        $(document).ready(function () {

            {% for type, flash_messages in app.session.flashBag.all %}
            {% for flash_message in flash_messages %}
            notify('{{ flash_message|trans }}', '{{ type|replace({ ("fos_user_success"): "success" }) }}');
            {% endfor %}
            {% endfor %}

            {% if form is defined %}
            {% if not form.vars.valid %}
            notify('{{ 'app.form.not_valid'|trans }}', 'danger');
            {% endif %}
            {% endif %}

            {% if error is defined and error %}
            notify('{{ error|trans }}', 'danger');
            {% endif %}

        });
    </script>

    {% block topline %}{% endblock %}
    {% block menu %}{% endblock %}
    {% block navigation %}{% endblock %}

    <main class="main-content" role="main">

        {% if header is defined %}
            <h1 class="page-title {{ headerIcon is defined ? headerIcon : '' }}">
                {{ header|trans }}
            </h1>
        {% endif %}

        <div class="page-actions">
            {% block pageActions %}{% endblock %}
        </div>

        <div class="subnavigation margin-bottom-20">
            {% block subnavigation %}{% endblock %}
        </div>

        {% block body %}
            {% block fos_user_content %}
            {% endblock fos_user_content %}
        {% endblock %}

    </main>

    <div class="loader">
        <div class="loader-overlay"></div>
        <div class="loader-center">
            <div><i class="fa fa-spinner fa-spin" style="font-size:48px"></i></div>
            <div class="loader-text"><span>LOADING...</span></div>
        </div>
    </div>

{% endblock %}
