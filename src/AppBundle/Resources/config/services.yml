parameters:
    app.request_handler.class: AppBundle\Handler\RequestHandler
    app.entity_action_handler.class: AppBundle\Handler\EntityActionHandler
    app.form_handler.class: AppBundle\Handler\FormHandler
    app.entity_factory.class: AppBundle\Utils\EntityFactory
    app.patient_relation_listener.class: AppBundle\EventListener\PatientRelationListener

services:
    app.request_handler:
        class: '%app.request_handler.class%'

    app.form_handler:
        class: '%app.form_handler.class%'
        arguments:
            - '@validator'

    app.entity_action_handler:
        class: '%app.entity_action_handler.class%'
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@app.form_handler'
            - '@app.request_handler'
            - '@request_stack'
            - '@router'

    app.entity_factory:
        class: '%app.entity_factory.class%'
        arguments:
            - '@doctrine.orm.entity_manager'

    app.patient_relation_listener:
        class: '%app.patient_relation_listener.class%'
        tags:
            - { name: doctrine.event_listener, event: onFlush }
