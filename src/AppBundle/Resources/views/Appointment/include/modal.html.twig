<script>

    $('body').on('submit', 'form.app-appointment-form', function (e) {
        e.preventDefault();

        var form = $(this);
        ajaxFormHandler(form, function (data) {
            render();
            if (!data.error) {
                $("#calendar").fullCalendar('refetchEvents');
            }
        });
    });

    $('body').on('submit', 'form.app-appointment-form-with-patient', function (e) {
        e.preventDefault();

        var form = $(this);
        ajaxFormHandler(form, function (data) {
            render();
            if (!data.error) {
                $("#calendar").fullCalendar('refetchEvents');
            }
        });
    });

    $('body').on('click', '.app-appointment-create', function (e) {
        e.preventDefault();
        appointmentCreate();
    });

    $('body').on('click', '.app-appointment-create-with-patient', function (e) {
        e.preventDefault();
        appointmentCreateWithPatient();
    });

    $('body').on('click', '.app-appointment-edit', function (e) {
        e.preventDefault();
        var appointmentId = $(this).data('entityId');
        eventEdit(appointmentId);
    });

    function appointmentCreate(date) {
        eventCreate(date, 'appointment_create', '{{ 'app.appointment.new'|trans }}');
    }

    function appointmentCreateWithPatient(date) {
        eventCreate(date, 'appointment_create_with_patient', '{{ 'app.appointment.new'|trans }}');
    }


</script>
