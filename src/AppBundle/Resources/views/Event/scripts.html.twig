<script>

    function eventEdit(appointmentId) {
        loaderShow();

        var url = Routing.generate('event_update', {
            'id': appointmentId
        });

        $.get(url, {}, function (data) {
            data = $.parseJSON(data);
            if (typeof data.form !== 'undefined') {
                $('#app-modal-event .modal-title').html('{{ 'app.event.edit'|trans }}');
                $('#app-modal-event .modal-body').html(data.form);
                ajaxModalButtons($('#app-modal-event'));
                $('#app-modal-event').modal('show');
            }
            loaderHide();
        });
    }

    function eventCreate(date, route, routeParams, titleLabel) {
        loaderShow();

        if (typeof date !== 'undefined') {
            routeParams.date = date;
        } else {
            if (typeof $('#app-modal-event').attr('data-initial-date') !== 'undefined') {
                routeParams.date = $('#app-modal-event').attr('data-initial-date');
            }
        }

        if (typeof routeParams.date !== 'undefined') {
            $('#app-modal-event').attr('data-initial-date', date);
        }

        var url = Routing.generate(route, routeParams);

        $.get(url, {}, function (data) {
            data = $.parseJSON(data);
            if (typeof data.form !== 'undefined') {
                $('#app-modal-event .modal-title').html(titleLabel);
                $('#app-modal-event .modal-body').html(data.form);
                ajaxModalButtons($('#app-modal-event'));
                $('#app-modal-event').modal('show');
            }
            loaderHide();
        });
    }

</script>
