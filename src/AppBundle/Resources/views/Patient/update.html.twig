{% extends entity.id ? '@App/Patient/layout.html.twig':'inner.html.twig' %}

{% block header %}
    {{ entity.id ? entity : 'app.patient.new'|trans }}
{% endblock %}

{% block body %}

    {{ form_start(form) }}

    {% embed "buttons.html.twig" %}
        {% block buttons %}
            {% set cancelPath = entity.id ? path('patient_view', {'id':entity.id}) : path('patient_index') %}
            <input type="submit" value="{{ 'app.action.save'|trans }}" class="btn btn-primary"/>
            <a href="{{ cancelPath }}" class="btn btn-default">{{ 'app.action.cancel'|trans }}</a>
        {% endblock %}
    {% endembed %}

    {% embed "subheading.html.twig" %}
        {% block subheading %}
            {{ 'app.patient.patient_information'|trans }}
        {% endblock %}
    {% endembed %}

    {{ form_row(form.title) }}
    {{ form_row(form.firstName) }}
    {{ form_row(form.lastName) }}
    {{ form_row(form.preferredName) }}
    {{ form_row(form.dateOfBirth) }}
    {{ form_row(form.gender) }}

    {% embed "subheading.html.twig" %}
        {% block subheading %}
            {{ 'app.related_patient.plural_label'|trans }}
        {% endblock %}
    {% endembed %}
    {% include "@App/RelatedPatient/updateList.html.twig" %}

    {% embed "subheading.html.twig" %}
        {% block subheading %}
            {{ 'app.patient.contact_information'|trans }}
        {% endblock %}
    {% endembed %}

    {% include "@App/Phone/updateList.html.twig" %}

    {{ form_row(form.email) }}
    {{ form_row(form.addressFirst) }}
    {{ form_row(form.addressSecond) }}
    {{ form_row(form.city) }}
    {{ form_row(form.state) }}

    {% embed "subheading.html.twig" %}
        {% block subheading %}
            {{ 'app.patient.notification_settings'|trans }}
        {% endblock %}
    {% endembed %}
    {{ form_row(form.autoRemindSMS) }}
    {{ form_row(form.autoRemindEmail) }}
    {{ form_row(form.bookingConfirmationEmail) }}

    {% embed "subheading.html.twig" %}
        {% block subheading %}
            {{ 'app.patient.other'|trans }}
        {% endblock %}
    {% endembed %}

    {{ form_row(form.occupation) }}
    {{ form_row(form.emergencyContact) }}
    {{ form_row(form.healthFund) }}
    {{ form_row(form.referrer) }}
    {{ form_row(form.notes) }}

    {{ form_widget(form._token) }}
    {{ form_end(form, {'render_rest': false}) }}

{% endblock %}
