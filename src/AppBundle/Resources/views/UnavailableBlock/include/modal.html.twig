<script>

    $('body').on('submit', 'form.app-unavailable-block-form', function (e) {
        e.preventDefault();

        var form = $(this);
        ajaxFormHandler(form, function (data) {
            render();
            if (!data.error) {
                $("#calendar").fullCalendar('refetchEvents');
            }
        });
    });

    $('body').on('click', '.app-unavailable-block-create', function (e) {
        e.preventDefault();
        unavailableBlockCreate();
    });

    $('body').on('click', '.app-unavailable-block-edit', function (e) {
        e.preventDefault();
        var unavailableBlockId = $(this).data('entityId');
        eventEdit(unavailableBlockId);
    });

    function unavailableBlockCreate(date) {
        loaderShow();

        var routeParams = {};
        if (date !== 'undefined') {
            routeParams.date = date;
        }
        var url = Routing.generate('unavailable_block_create', routeParams);

        $.get(url, {}, function (data) {
            data = $.parseJSON(data);
            if (typeof data.form !== 'undefined') {
                $('#app-modal-event .modal-title').html('{{ 'app.unavailable_block.new'|trans }}');
                $('#app-modal-event .modal-body').html(data.form);
                ajaxModalButtons($('#app-modal-event'));
                $('#app-modal-event').modal('show');
            }
            loaderHide();
        });
    }



</script>
